# 清除缓存功能说明

## 功能概述
在应用的"配置项"页面底部添加了"清除缓存"按钮，用户可以通过此功能清除所有工具网址的缓存数据。

## 功能特点

### 🗑️ 全面的缓存清理
- **WebView 缓存**：清除网页缓存、表单数据、浏览历史
- **Cookie 数据**：清除所有网站的 Cookie 信息
- **本地存储**：清除 localStorage 和 sessionStorage 数据
- **SSL 偏好**：清除 SSL 证书偏好设置
- **应用缓存**：清除应用内部和外部缓存目录
- **WebView 数据**：清除 WebView 数据目录

### 🔒 安全确认机制
- 点击"清除缓存"按钮后会弹出确认对话框
- 详细说明清除操作的影响
- 用户需要再次确认才能执行清除操作

### 📱 用户界面
- 红色按钮设计，突出操作的重要性
- 带有垃圾桶图标，直观表示清除功能
- 位于配置页面底部，方便访问

## 使用方法

1. **打开配置页面**
   - 在应用底部导航栏点击"配置项"

2. **找到清除缓存按钮**
   - 滚动到页面底部
   - 找到红色的"清除缓存"按钮

3. **执行清除操作**
   - 点击"清除缓存"按钮
   - 阅读确认对话框中的说明
   - 点击"清除缓存"确认执行

4. **操作完成**
   - 系统会显示"缓存已清除"的提示
   - 所有工具网址的缓存数据被清空

## 清除内容详情

### ✅ 会被清除的数据
- 网页缓存文件
- 用户登录状态（Cookie）
- 表单自动填充数据
- 浏览历史记录
- 本地存储数据（localStorage/sessionStorage）
- SSL 证书偏好
- 应用临时文件

### ❌ 不会被清除的数据
- 工具配置信息（工具名称、网址、排序等）
- 应用设置
- 用户添加的工具项目

## 使用场景

### 🔄 常见使用情况
- **登录问题**：网站登录状态异常时
- **页面显示异常**：网页显示错误或过时内容
- **存储空间清理**：释放应用占用的存储空间
- **隐私保护**：清除浏览痕迹和个人数据
- **故障排除**：解决 WebView 相关问题

### ⚠️ 注意事项
- 清除缓存后，所有网站需要重新登录
- 网页加载速度可能暂时变慢（需要重新缓存）
- 表单自动填充数据会丢失
- 网站的个性化设置可能重置

## 技术实现

### 核心功能
```kotlin
private fun clearWebViewCache() {
    // 清除 WebView 各种缓存数据
    val webView = WebView(requireContext())
    webView.clearCache(true)
    webView.clearFormData()
    webView.clearHistory()
    webView.clearSslPreferences()
    
    // 清除 Cookie 和本地存储
    CookieManager.getInstance().removeAllCookies(null)
    WebStorage.getInstance().deleteAllData()
    
    // 清除文件系统缓存
    // ...
}
```

### 安全机制
- 使用确认对话框防止误操作
- 异常处理确保操作安全
- 操作结果反馈给用户

## 故障排除

### 如果清除缓存失败
1. **检查权限**：确认应用有足够的文件访问权限
2. **重启应用**：完全关闭应用后重新打开
3. **手动清理**：在系统设置中清除应用数据

### 清除后的常见问题
1. **网站需要重新登录** - 这是正常现象
2. **页面加载较慢** - 首次访问需要重新缓存
3. **设置丢失** - 网站个人设置需要重新配置

## 版本信息
- **添加版本**：v1.71+
- **兼容性**：Android 7.0 (API 24) 及以上
- **测试状态**：已通过功能测试

这个功能为用户提供了一个方便的方式来管理和清理 WebView 缓存，提升应用的使用体验和隐私保护。